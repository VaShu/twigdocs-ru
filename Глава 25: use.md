Горизонтальное переиспользование шаблонов это профессиональная техника обхода ограничений множественного наследования в Twig, которая крайне редко может понадобиться в обычных шаблонах.

Наследование шаблонов одна из самых мощных возможностей Twig, но и она ограничена единственным родителем-шаблоном; один шаблон может быть расширен одним другим шаблоном. Такое ограничение делает наследование шаблонов простым для понимания и отладки механизмом:

```twig
{% extends 'base.html' %}

{% block title %}{% endblock %}
{% block content %}{% endblock %}
```

Горизонтальное переиспользование - способ добиться такого же результата, как и при наличие множественного наследование, только с дополнительными сложностями:

```twig
{% extends 'base.html' %}

{% use 'blocks.html' %}

{% block title %}{% endblock %}
{% block content %}{% endblock %}
```

Тег ```use``` импортирует блоки из файла ```blocks.html``` в текущий шаблона (работает почти так же, как макрос, только для блоков):

```twig
{# blocks.html #}

{% block sidebar %}{% endblock %}
```

В данном примере тег ```use``` импортирует содержимое шаблона ```blocks.html``` (блок ```sidebar```) в текущий основной шаблон. Код будет почти эквивалентен следующему:

```twig
{% extends 'base.html' %}

{% block sidebar %}{% endblock %}
{% block title %}{% endblock %}
{% block content %}{% endblock %}
```

!!! Внимание: тег ```use``` импортирует только те шаблоны, которые не расширяются другими шаблонами и не определяют макросы. В импортируемом шаблоне могут быть использованы другие ```use```-шаблоны.

Наименование шаблона используемое ```use```-тегом не может быть выражением.

Главный шаблон может переопределять любой импортируемый блок. Если главный шаблон уже содержит определение блока ```sidebar```, то такой же блок объявленный в шаблоне ```blocks.html``` будет проигнорирован. Для избежания конфликта имён можно прибегнуть к именованому импорту:

```twig
{% extends 'base.html' %}

{% use 'blocks.html' with sidebar as base_sidebar, title as base_title %}

{% block sidebar %}{% endblock %}
{% block title %}{% endblock %}
{% block content %}{% endblock %}
```

Функция ```parent()``` автоматически определит корректную структуру дерева наследования, поэтому она может быть использована при перезаписи блоков импортируемых из шаблона:

```twig
{% extends 'base.html' %}

{% use 'blocks.html' %}

{% block sidebar %}
  {{ parent() }}
{% endblock %}

{% block title %}{% endblock %}
{% block content %}{% endblock %}
```

В этом примере функция ```parent()``` корректно вызовет ```sidebar``` из ```blocks.html```.

Переимнование позволяет симулировать наследование:

```twig
{% extends 'base.html' %}

{% use 'blocks.html' with sidebar as parent_sidebar %}

{% block sidebar %}
  {% block('parent_sidebar') %}
{% endblock %}
```

Возможно использование неограниченного количества ```use```-тегов. Если в двух и более импортируемых шаблонах определены блоки с одинаковым именем, то "победит" тот блок, который был объявлен последним.

