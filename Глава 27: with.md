Используйте тег ```with``` для создания новой внутренней области видимости. Переменные, объявленные внутри этой области видимости недоступны вне текущей области видимости:

```twig
{% with %}
  {% set foo = 42 %}
  {{ foo }} {# 42 #}
{% endwith %}

{# на этом этапе foo невидима #}
```

Вместо того, чтобы объявлять переменные в самом начале новой области видимости, можно воспользоваться передачей хэш-массива переменных в блок ```with```; предыдущий пример аналогичен этому:

```twig
{% with {foo: 42} %}
  {{ foo }} {# 42 #}
{% endwith %}

{# на этом этапе foo невидима #}

{# работает с передачей любой переменной представляющей собой хэш #}
{% set vars = {foo: 42} %}
{% with vars %}
  ...
{% endwith %}
```

По-умолчанию внутренняя область видимости имеет доступ к переменным внешней области видимости; чтобы изменить такое поведение - добавьте тег ```only```:

```twig
{% set bar = 'bar' %}
{% with {foo: 42} only %}
  {# только foo доступен #}
  {# bar недоступен #}
{% endwith %}
```

